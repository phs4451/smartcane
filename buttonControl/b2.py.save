# -*- coding: utf-8 -*-
import picamera
from picamera.array import PiRGBArray
import time
import requests
import base64
import json
from collections import OrderedDict
import pprint
from PIL import Image

import RPi.GPIO as GPIO      # gpio ?ºÏù¥Î∏åÎü¨Î¶?from time import sleep       # sleep ?ºÏù¥Î∏åÎü¨Î¶?
from time import sleep

LED = 23
Button = 18
count = 0


GPIO.setmode(GPIO.BCM)      # GPIO Î™®Îìú ?ãÌåÖ

GPIO.setup(LED, GPIO.OUT)   # LED Ï∂úÎ†•?ºÎ°ú ?§Ï†ï
GPIO.setup(Button, GPIO.IN) # Î≤ÑÌäº ?ÖÎ†•?ºÎ°ú ?§Ï†ï
camera = picamera.PiCamera()
capture = PiRGBArray(camera)
print 'Start the GPIO App'  # ?úÏûë???åÎ¶¨??
print "Press the button (CTRL-C to exit)"
try:
        while True:
                if GPIO.input(Button)==0:   
                        count+=1
                        if count == 3:
                           GPIO.output(LED, True)
                           print "Button was Pressed!"  
                           imgname='./image9.jpg'
                           camera.capture(capture,format='rgb',use_video_port=True)
                           capture = Image.fromarray(capture.array)
                           capture.save(imgname)
                           count=0
                        else:
                           print "Button was
                                                                     
                else:
                        GPIO.output(LED, False)
                        print "Button was Not Pressed!"
                        print 'count = ',count
                        
                 
                sleep(1)
                
except KeyboardInterrupt:      # CTRL-CÎ•??ÑÎ•¥Î©?Î∞úÏÉù
        GPIO.cleanup()
